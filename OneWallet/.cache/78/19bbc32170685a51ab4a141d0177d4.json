{"id":"../node_modules/@harmony-js/contract/dist/events/eventFactory.js","dependencies":[{"name":"/home/rachit/Projects/demo/web/node_modules/@harmony-js/contract/dist/events/eventFactory.js.map","includedInParent":true,"mtime":499162500000},{"name":"/home/rachit/Projects/demo/web/node_modules/@harmony-js/contract/src/events/eventFactory.ts","includedInParent":true,"mtime":499162500000},{"name":"/home/rachit/Projects/demo/web/package.json","includedInParent":true,"mtime":1605273881149},{"name":"/home/rachit/Projects/demo/web/node_modules/@harmony-js/contract/package.json","includedInParent":true,"mtime":1605275414276},{"name":"@harmony-js/utils","loc":{"line":9,"column":22},"parent":"/home/rachit/Projects/demo/web/node_modules/@harmony-js/contract/dist/events/eventFactory.js","resolved":"/home/rachit/Projects/demo/web/node_modules/@harmony-js/utils/dist/index.js"},{"name":"./event","loc":{"line":10,"column":22},"parent":"/home/rachit/Projects/demo/web/node_modules/@harmony-js/contract/dist/events/eventFactory.js","resolved":"/home/rachit/Projects/demo/web/node_modules/@harmony-js/contract/dist/events/event.js"},{"name":"../utils/formatter","loc":{"line":11,"column":26},"parent":"/home/rachit/Projects/demo/web/node_modules/@harmony-js/contract/dist/events/eventFactory.js","resolved":"/home/rachit/Projects/demo/web/node_modules/@harmony-js/contract/dist/utils/formatter.js"},{"name":"../utils/encoder","loc":{"line":12,"column":24},"parent":"/home/rachit/Projects/demo/web/node_modules/@harmony-js/contract/dist/events/eventFactory.js","resolved":"/home/rachit/Projects/demo/web/node_modules/@harmony-js/contract/dist/utils/encoder.js"}],"generated":{"js":"\"use strict\";\n/**\n * @packageDocumentation\n * @module harmony-contract\n * @hidden\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EventFactory = void 0;\nvar utils_1 = require(\"@harmony-js/utils\");\nvar event_1 = require(\"./event\");\nvar formatter_1 = require(\"../utils/formatter\");\nvar encoder_1 = require(\"../utils/encoder\");\nvar EventFactory = /** @class */ (function () {\n    // constructor\n    function EventFactory(contract) {\n        this.contract = contract;\n        this.abiModel = this.contract.abiModel;\n        this.abiCoder = this.contract.abiCoder;\n        this.eventKeys = this.mapEventKeys();\n    }\n    EventFactory.prototype.addEventsToContract = function () {\n        var _this = this;\n        this.eventKeys.forEach(function (key) {\n            var newObject = {};\n            newObject[key] = function (params) {\n                return new event_1.EventMethod(key, \n                // params,\n                _this.map(_this.abiModel.getEvent(key), _this.contract, params), _this.abiModel.getEvent(key), _this.contract);\n            };\n            Object.assign(_this.contract.events, newObject);\n        });\n        return this.contract;\n    };\n    /**\n     * @function mapMethodKeys\n     * @return {string[]} {description}\n     */\n    EventFactory.prototype.mapEventKeys = function () {\n        return Object.keys(this.abiModel.abi.events);\n    };\n    EventFactory.prototype.map = function (abiItemModel, contract, options) {\n        if (!options) {\n            options = {};\n        }\n        if (!utils_1.isArray(options.topics)) {\n            options.topics = [];\n        }\n        if (typeof options.fromBlock !== 'undefined') {\n            options.fromBlock = formatter_1.inputBlockNumberFormatter(options.fromBlock);\n        }\n        // else if (contract.defaultBlock !== null) {\n        //   options.fromBlock = contract.defaultBlock;\n        // }\n        if (typeof options.toBlock !== 'undefined') {\n            options.toBlock = formatter_1.inputBlockNumberFormatter(options.toBlock);\n        }\n        if (typeof options.filter !== 'undefined') {\n            options.topics = options.topics.concat(encoder_1.eventFilterEncoder(this.abiCoder, abiItemModel, options.filter));\n            delete options.filter;\n        }\n        if (!abiItemModel.anonymous) {\n            options.topics.unshift(abiItemModel.signature);\n        }\n        if (!options.address) {\n            options.address = contract.address;\n        }\n        return options;\n    };\n    return EventFactory;\n}());\nexports.EventFactory = EventFactory;\n"},"sourceMaps":{"js":{"version":3,"file":"eventFactory.js","sourceRoot":"","sources":["../../src/events/eventFactory.ts"],"names":[],"mappings":";AAAA;;;;GAIG;;;AAEH,2CAA4C;AAI5C,iCAAsC;AACtC,gDAA+D;AAC/D,4CAAsD;AAEtD;IAME,cAAc;IACd,sBAAY,QAAkB;QAC5B,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC;QACvC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC;QACvC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;IACvC,CAAC;IAED,0CAAmB,GAAnB;QAAA,iBAcC;QAbC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAC,GAAW;YACjC,IAAM,SAAS,GAAQ,EAAE,CAAC;YAC1B,SAAS,CAAC,GAAG,CAAC,GAAG,UAAC,MAAW;gBAC3B,OAAA,IAAI,mBAAW,CACb,GAAG;gBACH,UAAU;gBACV,KAAI,CAAC,GAAG,CAAC,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,KAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,EAC5D,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,EAC3B,KAAI,CAAC,QAAQ,CACd;YAND,CAMC,CAAC;YACJ,MAAM,CAAC,MAAM,CAAC,KAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;QACjD,CAAC,CAAC,CAAC;QACH,OAAO,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IACD;;;OAGG;IACK,mCAAY,GAApB;QACE,OAAO,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAC/C,CAAC;IAEO,0BAAG,GAAX,UAAY,YAA0B,EAAE,QAAkB,EAAE,OAAY;QACtE,IAAI,CAAC,OAAO,EAAE;YACZ,OAAO,GAAG,EAAE,CAAC;SACd;QAED,IAAI,CAAC,eAAO,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;YAC5B,OAAO,CAAC,MAAM,GAAG,EAAE,CAAC;SACrB;QAED,IAAI,OAAO,OAAO,CAAC,SAAS,KAAK,WAAW,EAAE;YAC5C,OAAO,CAAC,SAAS,GAAG,qCAAyB,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;SAClE;QACD,6CAA6C;QAC7C,+CAA+C;QAC/C,IAAI;QAEJ,IAAI,OAAO,OAAO,CAAC,OAAO,KAAK,WAAW,EAAE;YAC1C,OAAO,CAAC,OAAO,GAAG,qCAAyB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;SAC9D;QAED,IAAI,OAAO,OAAO,CAAC,MAAM,KAAK,WAAW,EAAE;YACzC,OAAO,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,MAAM,CACpC,4BAAkB,CAAC,IAAI,CAAC,QAAQ,EAAE,YAAY,EAAE,OAAO,CAAC,MAAM,CAAC,CAChE,CAAC;YACF,OAAO,OAAO,CAAC,MAAM,CAAC;SACvB;QAED,IAAI,CAAC,YAAY,CAAC,SAAS,EAAE;YAC3B,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;SAChD;QAED,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE;YACpB,OAAO,CAAC,OAAO,GAAG,QAAQ,CAAC,OAAO,CAAC;SACpC;QAED,OAAO,OAAO,CAAC;IACjB,CAAC;IACH,mBAAC;AAAD,CAAC,AA1ED,IA0EC;AA1EY,oCAAY","sourcesContent":["/**\n * @packageDocumentation\n * @module harmony-contract\n * @hidden\n */\n\nimport { isArray } from '@harmony-js/utils';\nimport { AbiCoderClass } from '../abi/api';\nimport { AbiModel, AbiItemModel } from '../models/types';\nimport { Contract } from '../contract';\nimport { EventMethod } from './event';\nimport { inputBlockNumberFormatter } from '../utils/formatter';\nimport { eventFilterEncoder } from '../utils/encoder';\n\nexport class EventFactory {\n  contract: Contract;\n  abiModel: any | AbiModel;\n  abiCoder: AbiCoderClass;\n  private eventKeys: string[];\n\n  // constructor\n  constructor(contract: Contract) {\n    this.contract = contract;\n    this.abiModel = this.contract.abiModel;\n    this.abiCoder = this.contract.abiCoder;\n    this.eventKeys = this.mapEventKeys();\n  }\n\n  addEventsToContract() {\n    this.eventKeys.forEach((key: string) => {\n      const newObject: any = {};\n      newObject[key] = (params: any) =>\n        new EventMethod(\n          key,\n          // params,\n          this.map(this.abiModel.getEvent(key), this.contract, params),\n          this.abiModel.getEvent(key),\n          this.contract,\n        );\n      Object.assign(this.contract.events, newObject);\n    });\n    return this.contract;\n  }\n  /**\n   * @function mapMethodKeys\n   * @return {string[]} {description}\n   */\n  private mapEventKeys(): string[] {\n    return Object.keys(this.abiModel.abi.events);\n  }\n\n  private map(abiItemModel: AbiItemModel, contract: Contract, options: any) {\n    if (!options) {\n      options = {};\n    }\n\n    if (!isArray(options.topics)) {\n      options.topics = [];\n    }\n\n    if (typeof options.fromBlock !== 'undefined') {\n      options.fromBlock = inputBlockNumberFormatter(options.fromBlock);\n    }\n    // else if (contract.defaultBlock !== null) {\n    //   options.fromBlock = contract.defaultBlock;\n    // }\n\n    if (typeof options.toBlock !== 'undefined') {\n      options.toBlock = inputBlockNumberFormatter(options.toBlock);\n    }\n\n    if (typeof options.filter !== 'undefined') {\n      options.topics = options.topics.concat(\n        eventFilterEncoder(this.abiCoder, abiItemModel, options.filter),\n      );\n      delete options.filter;\n    }\n\n    if (!abiItemModel.anonymous) {\n      options.topics.unshift(abiItemModel.signature);\n    }\n\n    if (!options.address) {\n      options.address = contract.address;\n    }\n\n    return options;\n  }\n}\n"]}},"error":null,"hash":"6a897f6ec9e75d9237f1508f37a39002","cacheData":{"env":{}}}